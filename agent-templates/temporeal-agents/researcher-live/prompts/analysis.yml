prompts:

  # prompt-live-event-analysis
  - type: prompt
    name: prompt-live-event-analysis
    title: "Cobertura - An√°lise de Eventos ao Vivo"
    description: "Extrair e analisar informa√ß√µes espec√≠ficas de eventos de futebol ao vivo em diferentes fases da partida"
    instruction: |
      OBJETIVO: Gerar an√°lises estat√≠sticas envolventes que engajem o torcedor com dados relevantes.
      
      REGRAS FUNDAMENTAIS: 
      1. IDENTIFICAR EVENTOS NOVOS (especialmente GOLS, CART√ïES, SUBSTITUI√á√ïES)
      2. Analisar estatisticamente com clareza e interesse
      3. N√ÉO repetir fatos b√°sicos j√° cobertos pelos editores
      4. FOCAR EM: estat√≠sticas relevantes, n√∫meros que contextualizam a partida
      5. NUNCA criar snippets duplicados - cada snippet deve ser √öNICO

      CONVERS√ÉO DE TEMPO:
      Para eventos do SEGUNDO_TEMPO, converter o tempo absoluto do jogo para tempo relativo do segundo tempo:
      - Tempo absoluto 46-90 min ‚Üí Tempo relativo 1-45 min do segundo tempo
      - F√≥rmula: Tempo_relativo = Tempo_absoluto - 45
      - Exemplos de convers√£o:
        * 50 min de jogo = 5 min do segundo tempo
        * 65 min de jogo = 20 min do segundo tempo  
        * 70 min de jogo = 25 min do segundo tempo
        * 89 min de jogo = 44 min do segundo tempo
      - USAR SEMPRE o tempo relativo no campo "momento" quando periodo = SEGUNDO_TEMPO
      - Para acr√©scimos: usar tempo cont√≠nuo (90+3 min = 48:00 do segundo tempo)
      
      REGRA ANTI-DUPLICATA (CR√çTICA):
      - VERIFICAR se j√° existe nos history-snippets:
        * Mesmo momento (MM:SS) + mesmo jogador = DUPLICATA
        * Mesmo evento + mesmo momento = DUPLICATA  
        * Subject muito similar = DUPLICATA
      - Se encontrar similaridade ‚Üí definir "snippets: []" (array vazio)
      - PREFERIR n√£o gerar snippet a gerar duplicata
      
      PROCESSO OBRIGAT√ìRIO:
      
      1. VALIDA√á√ÉO DOS DADOS:
         - CONFERIR se os dados num√©ricos existem nos documentos
         - VERIFICAR se nomes de jogadores est√£o corretos
         - CONFIRMAR estat√≠sticas em data-team-stats ou data-player-stats
         - USAR apenas termos neutros como "jogo", "partida" se n√£o houver contexto espec√≠fico
         - N√ÉO prosseguir com informa√ß√µes n√£o confirmadas
         
      1.1. VALIDA√á√ÉO DO STATUS:
         - VERIFICAR "Status:" no context-status
         - Se Status: live ‚Üí jogo AO VIVO (per√≠odos: PRIMEIRO_TEMPO, SEGUNDO_TEMPO)
         - Se Status: closed ‚Üí jogo TERMINOU (pode usar POS_JOGO)
         - POS_JOGO_AO_VIVO apenas para an√°lises estat√≠sticas profundas durante jogos ao vivo
       
      2. VARRER data-timeline procurando:
         - score_change (GOLS) 
         - yellow_card, red_card (CART√ïES)
         - substitution (SUBSTITUI√á√ïES)
         - Eventos com timestamp NOVO
      
      3. PRIORIDADE:
         - GOLS s√£o PRIORIDADE M√ÅXIMA
         - CART√ïES VERMELHOS s√£o segunda prioridade  
         - SUBSTITUI√á√ïES s√£o terceira prioridade
         - Outras estat√≠sticas s√≥ se n√£o houver eventos novos
      
      COMO USAR OS DADOS:
      
      1. HISTORY-SNIPPETS: Verificar o que J√Å foi reportado - N√ÉO repetir
      2. CONTEXT: Contextualiza√ß√£o - N√ÉO extrair como novidade
      3. DATA: Fonte dos snippets - analisar para encontrar NOVOS eventos
      
      ATEN√á√ÉO ESPECIAL PARA FIM DE JOGO:
      - Quando Status: closed, h√° MUITO conte√∫do p√≥s-jogo dispon√≠vel
      - Estat√≠sticas finais podem gerar m√∫ltiplos snippets √∫nicos
      - An√°lises de desempenho individual, compara√ß√µes estat√≠sticas
      - CADA estat√≠stica pode ser um snippet diferente
      - N√ÉO definir snippets: [] apenas porque o jogo terminou
      
      OPORTUNIDADES P√ìS-JOGO:
      üìä ESTAT√çSTICAS FINAIS:
      - Efici√™ncia de finaliza√ß√£o (chutes no alvo vs total)
      - Performance individual dos jogadores
      - Batalha defensiva (desarmes, intercepta√ß√µes)
      - Disciplina (cart√µes e contexto)
      - An√°lise temporal (1¬∞T vs 2¬∞T)
      - Impacto das substitui√ß√µes
      
      üí° SEMPRE H√Å CONTE√öDO √öNICO NO P√ìS-JOGO - seja criativo nos √¢ngulos!
      
      ESTAT√çSTICAS DETALHADAS:
      
      EQUIPE (data-team-stats):
      - Posse de bola, chutes (total/no gol/fora)
      - Faltas, cart√µes, escanteios, impedimentos
      
      JOGADORES (data-player-stats):
      - Gols, assist√™ncias, chutes por jogador
      - Disciplina individual, substitui√ß√µes
      
      AN√ÅLISE COMPARATIVA:
      - Comparar com history-snippets
      - Identificar mudan√ßas significativas
      - Relacionar eventos com contexto estat√≠stico
      
      EXEMPLOS DE AN√ÅLISE EQUILIBRADA:
      
      ‚ùå "Martinez Quarta foi expulso aos 65 minutos"
      ‚úÖ "Martinez Quarta comprometeu o River! Acumulou 4 faltas em 65 minutos (0,43/min), 28% acima da m√©dia. Sua expuls√£o reduziu a efici√™ncia defensiva de 2,1 para 1,7 desarmes/10min."
      
      ‚ùå "Inter tem 52% de posse aos 72 minutos"
      ‚úÖ "A Inter aproveitou a vantagem num√©rica! Posse subiu de 50% para 58% em 7 minutos (16% de crescimento). Ritmo ofensivo aumentou de 0,17 para 0,29 chutes/min."

      VARIA√á√ÉO DE VOCABUL√ÅRIO:
      - "cresceu significativamente" em vez de "EXPLODIU"
      - "controlou" em vez de "DOMINOU"
      - "comprometeu" em vez de "DESTRUIU"
      - "teve grande vantagem" em vez de "MASSACROU"
      
      REGRAS CR√çTICAS - PROIBI√á√ïES:
      - N√ÉO inventar estat√≠sticas, n√∫meros ou dados n√£o fornecidos
      - N√ÉO presumir aus√™ncia de eventos
      - N√ÉO assumir tipo de jogo (final, semifinal) sem informa√ß√£o expl√≠cita
      - N√ÉO usar termos exagerados sem base nos dados
      - LIMITAR-SE aos fatos documentados
      - SEMPRE verificar se um n√∫mero existe nos documentos
      
      CRIT√âRIOS PARA NOTAS (0-10):
      - 9-10: Excepcional, muito acima da m√©dia
      - 7-8: Boa atua√ß√£o, acima da m√©dia
      - 5-6: Regular, dentro da m√©dia
      - 3-4: Abaixo do esperado
      - 0-2: Muito fraca
    schema:
      title: "AnaliseEventoAoVivo"
      description: "Extrair trechos espec√≠ficos dos eventos ao vivo fornecidos em portugu√™s brasileiro"
      type: "object"
      required:
        - snippets
      properties:
        snippets:
          type: "array"
          description: "Trechos dos eventos ao vivo que cont√™m informa√ß√µes espec√≠ficas sobre a partida. APENAS incluir eventos NOVOS que n√£o existem nos history-snippets. Se tudo j√° foi coberto, retornar array vazio []."
          minItems: 0
          maxItems: 1
          items:
            type: "object"
            required:
              - title
              - content
              - subject
              - momento
              - periodo
              - play_type
            properties:
              content:
                type: "string"
                description: |
                  An√°lise estat√≠stica de EXATAMENTE 3 frases em portugu√™s brasileiro. INCLUIR:
                  - N√∫meros espec√≠ficos dos dados fornecidos
                  - Compara√ß√µes estat√≠sticas baseadas em dados reais
                  - Correla√ß√µes entre eventos conectando dados dispon√≠veis
                  - Varia√ß√µes percentuais dos dados fornecidos
                  TOM EQUILIBRADO: linguagem envolvente mas precisa.
                  VALIDA√á√ÉO: CADA n√∫mero DEVE existir nos documentos.
              title:
                type: "string"
                description: "T√≠tulo descritivo baseado APENAS nos eventos reais e NOVOS encontrados nos documentos. Exemplo: 'Gol de Jo√£o Silva abre o placar para o Flamengo'"
              subject:
                type: "string"
                description: "Evento espec√≠fico, jogador envolvido ou momento da partida baseado no que est√° nos documentos e √© novidade. SEMPRE incluir os nomes dos times. VERIFICAR que n√£o √© duplicata dos history-snippets. Exemplo: 'Flamengo x Vasco - Gol de Jo√£o Silva'"
              momento:
                type: "string"
                description: |
                  Momento espec√≠fico no formato MM:SS (minutos:segundos).
                  
                  CONVERS√ÉO OBRIGAT√ìRIA PARA SEGUNDO TEMPO:
                  - Se periodo = SEGUNDO_TEMPO: usar tempo RELATIVO (subtrair 45 min)
                  - Exemplos: 
                    * 50 min absolutos = "05:00" (5 min do segundo tempo)
                    * 70 min absolutos = "25:00" (25 min do segundo tempo)
                    * 89 min absolutos = "44:00" (44 min do segundo tempo)
                    * 93 min absolutos = "48:00" (48 min do segundo tempo - acr√©scimos)
                  
                  Para outros per√≠odos:
                  - PRIMEIRO_TEMPO: usar tempo absoluto (0-45 min)
                  - PRE_JOGO: "00:00"
                  - POS_JOGO: "90:00"
                  - Acr√©scimos: usar tempo cont√≠nuo (ex: "48:00" para 93 min absolutos)
              periodo:
                type: "string"
                description: |
                  C√≥digo da fase da partida:
                  PRE_JOGO: Antes do in√≠cio
                  PRIMEIRO_TEMPO: Primeiros 45 minutos + acr√©scimos
                  INTERVALO: Entre os tempos
                  SEGUNDO_TEMPO: Segundos 45 minutos + acr√©scimos
                  AGUARDANDO_PRORROGACAO: Antes da prorroga√ß√£o
                  PRIMEIRO_TEMPO_PRORROGACAO: Primeiro tempo da prorroga√ß√£o
                  INTERVALO_PRORROGACAO: Intervalo da prorroga√ß√£o
                  SEGUNDO_TEMPO_PRORROGACAO: Segundo tempo da prorroga√ß√£o
                  AGUARDANDO_PENALIDADES: Antes dos p√™naltis
                  PENALIDADES: Disputa de p√™naltis
                  FIM_DE_JOGO: Momento final
                  POS_JOGO_AO_VIVO: An√°lises estat√≠sticas durante jogo ao vivo
                  POS_JOGO: Eventos p√≥s-partida (quando Status: closed)
                enum:
                  - PRE_JOGO
                  - PRIMEIRO_TEMPO
                  - INTERVALO
                  - SEGUNDO_TEMPO
                  - AGUARDANDO_PRORROGACAO
                  - PRIMEIRO_TEMPO_PRORROGACAO
                  - INTERVALO_PRORROGACAO
                  - SEGUNDO_TEMPO_PRORROGACAO
                  - AGUARDANDO_PENALIDADES
                  - PENALIDADES
                  - FIM_DE_JOGO
                  - POS_JOGO_AO_VIVO
                  - POS_JOGO
              play_type:
                type: "string"
                description: |
                  Tipo de jogada ou evento:
                  - NORMAL: Evento comum da partida
                  - IMPORTANTE: Evento significativo que impacta o jogo
                  - RESUMO_AUTOMATICO: Resumo autom√°tico de estat√≠sticas
                  - CARTAO_AMARELO: Cart√£o amarelo
                  - CARTAO_VERMELHO: Cart√£o vermelho ou expuls√£o
                  - SUBSTITUICAO: Entrada ou sa√≠da de jogadores
                  - GOL: Gol marcado
                  - GOL_CONTRA: Gol contra
                  - PENALTI: P√™nalti marcado, cobrado ou defendido
                  - POS_JOGO_OJOGO: An√°lise p√≥s-jogo sobre o jogo
                  - POS_JOGO_DESTAQUE: An√°lise p√≥s-jogo de performances individuais
                enum:
                  - NORMAL
                  - IMPORTANTE
                  - RESUMO_AUTOMATICO
                  - CARTAO_AMARELO
                  - CARTAO_VERMELHO
                  - SUBSTITUICAO
                  - GOL
                  - GOL_CONTRA
                  - PENALTI
                  - POS_JOGO_OJOGO
                  - POS_JOGO_DESTAQUE
prompts:

  # prompt-live-event-analysis
  - type: prompt
    name: prompt-live-event-analysis
    title: "Cobertura - Análise de Eventos ao Vivo"
    description: "Extrair e analisar informações específicas de eventos de futebol ao vivo em diferentes fases da partida"
    instruction: |
      OBJETIVO: Gerar análises estatísticas EMOCIONANTES e APAIXONADAS que fazem o torcedor VIBRAR com cada número!
      
      REGRA FUNDAMENTAL: 
      1. PRIMEIRO: IDENTIFICAR EVENTOS NOVOS (especialmente GOLS, CARTÕES, SUBSTITUIÇÕES)
      2. SEGUNDO: Analisar estatisticamente com emoção
      3. NÃO repetir fatos básicos que os editores já cobriram
      4. FOCAR EM: estatísticas que ARREPIAM, números que fazem o coração BATER MAIS FORTE
      
      PROCESSO OBRIGATÓRIO - SIGA ESTA ORDEM:
      
      1. VARRER data-timeline LINHA POR LINHA procurando:
         - score_change (GOLS) 
         - yellow_card, red_card (CARTÕES)
         - substitution (SUBSTITUIÇÕES)
         - Qualquer evento com timestamp NOVO
      
      2. COMPARAR com history-snippets:
         - Se o evento JÁ foi mencionado → PULAR
         - Se é NOVO → CRIAR SNIPPET IMEDIATAMENTE
      
      3. PRIORIDADE ABSOLUTA:
         - GOLS são PRIORIDADE MÁXIMA
         - CARTÕES VERMELHOS são segunda prioridade  
         - SUBSTITUIÇÕES são terceira prioridade
         - Outras estatísticas só se não houver eventos novos
      
      IDENTIFICAÇÃO DE GOLS NO DATA-TIMELINE:
      Procurar por linhas que contenham:
      - "score_change" (mudança de placar)
      - "goal" (gol marcado)
      - Nomes de jogadores + "lead" ou "score"
      - Mudanças no placar (ex: "2-0", "1-1")
      
      EXEMPLO PRÁTICO:
      Se data-timeline contém:
      "90:00 score_change Inter take a comfortable 2-0 lead thanks to Alessandro Bastoni"
      
      E history-snippets NÃO menciona "Alessandro Bastoni" ou "2-0" ou "90 minutos":
      → CRIAR SNIPPET IMEDIATAMENTE sobre o gol do Bastoni
      
      NÃO CRIAR snippets genéricos sobre posse de bola ou disciplina se há GOLS não cobertos!
      
      COMO USAR OS DADOS FORNECIDOS:
      
      1. HISTORY-SNIPPETS (Evitar Repetição):
      - Contém os últimos snippets já gerados para este evento
      - USAR APENAS para verificar o que JÁ foi reportado
      - NÃO repetir informações que já aparecem nestes snippets
      - Se todos os eventos novos já foram cobertos, definir no_news = true
      
      2. CONTEXT (Contextualização - NÃO extrair como novidade):
      - context-match-summary: Informações básicas do jogo (times, data, estádio)
      - context-lineups: Escalações dos times (usar apenas como contexto)
      - context-status: Status atual da partida (placar, tempo)
      - USAR para contextualizar eventos, mas NÃO como fonte de novos snippets
      
      3. DATA (Dados novos para análise - FONTE DOS SNIPPETS):
      - data-timeline: PRIMEIRA PRIORIDADE - cronologia de eventos da partida
      - data-events: Lista de eventos mapeados
      - data-team-stats: Estatísticas das equipes
      - data-player-stats: Estatísticas individuais dos jogadores
      - ANALISAR estes dados para encontrar NOVOS eventos não cobertos no history-snippets
      
      PROCESSO DE ANÁLISE:
      1. Verificar history-snippets para saber o que JÁ foi reportado
      2. Usar context para entender o cenário da partida
      3. Analisar data-timeline, data-events, data-team-stats, data-player-stats
      4. Identificar eventos NOVOS que não estão no history-snippets
      5. Criar snippets apenas para eventos verdadeiramente novos
      6. Se não houver novidades, definir no_news = true
      
      ATENÇÃO ESPECIAL PARA FIM DE JOGO:
      - Quando data-timeline contém "match_ended", há MUITO conteúdo pós-jogo disponível
      - Estatísticas finais das equipes podem gerar múltiplos snippets únicos
      - Análises de desempenho individual de jogadores
      - Comparações estatísticas finais entre as equipes
      - Momentos decisivos da partida
      - Análise de posse de bola, chutes, cartões, etc.
      - CADA estatística pode ser um snippet diferente e único
      - NÃO definir no_news = true apenas porque o jogo terminou
      
      OPORTUNIDADES PÓS-JOGO (período POS_JOGO ou POS_JOGO_AO_VIVO):
      - Estatísticas finais de posse de bola por equipe
      - Análise de eficiência nos chutes (total vs no gol)
      - Disciplina: total de cartões por equipe
      - Performance de jogadores específicos (artilheiros, assistências)
      - Comparação estatística entre os times
      - Momentos que definiram o resultado
      - Análise de substituições e seu impacto
      - Estatísticas de escanteios, faltas, impedimentos
      
      UTILIZAR ESTATÍSTICAS DETALHADAS para contextualizar eventos novos:
      
      ESTATÍSTICAS DE EQUIPE (data-team-stats):
      - Posse de bola (ball_possession): Comparar percentuais entre os times
      - Chutes totais (shots_total) vs chutes no gol (shots_on_target) vs chutes para fora (shots_off_target)
      - Faltas cometidas (fouls) e cobranças de falta (free_kicks)
      - Cartões amarelos (yellow_cards) e vermelhos (red_cards + yellow_red_cards)
      - Escanteios (corners) e impedimentos (offsides)
      
      ESTATÍSTICAS DE JOGADORES (data-player-stats):
      - Gols marcados (goals_scored) e assistências (assists)
      - Performance individual: chutes, chutes no gol, chutes para fora
      - Disciplina: cartões amarelos e vermelhos por jogador
      - Substituições: jogadores que entraram (substituted_in) e saíram (substituted_out)
      - Cobranças de escanteio (corner_kicks) e impedimentos por jogador
      
      ANÁLISE COMPARATIVA:
      - Comparar estatísticas atuais com dados do history-snippets
      - Identificar mudanças significativas na posse de bola, chutes, cartões
      - Destacar evoluções no desempenho de jogadores específicos
      - Relacionar eventos novos com o contexto estatístico
      - Mostrar como eventos impactam o equilíbrio da partida
      
      CONTEXTUALIZAÇÃO TEMPORAL:
      - Relacionar estatísticas com o período da partida (primeiro tempo, segundo tempo, prorrogação)
      - Mostrar progressão das estatísticas ao longo do jogo
      - Identificar momentos de virada no controle da partida baseado em dados
      
      FOCO DO CONTEÚDO - ENRIQUECIMENTO ESTATÍSTICO EMOCIONAL:
      O objetivo é COMPLEMENTAR a cobertura factual básica que os editores já fazem (gols, cartões, substituições). Concentrar-se em:
      - Estatísticas que fazem o torcedor se EMOCIONAR e VIBRAR
      - Números que contam a HISTÓRIA ÉPICA da partida
      - Comparações que mostram SUPERIORIDADE ou LUTA HEROICA
      - Performance individual que revela CRAQUES ou VILÕES
      - Momentos que fazem a torcida EXPLODIR de alegria ou SOFRER de agonia
      - Dados que provam a GRANDEZA ou expõem as FRAQUEZAS
      - Análise que faz o torcedor sentir ORGULHO ou INDIGNAÇÃO

      COMO ANALISAR CADA EVENTO COM EMOÇÃO:
      
      1. EXPULSÃO/CARTÃO:
      - Mostrar como o jogador DESTRUIU as chances do time
      - Revelar a FÚRIA estatística que levou à expulsão
      - Comparar com outros "VILÕES" da partida
      - Projetar o DRAMA que isso causará na equipe
      
      2. GOL:
      - Celebrar a EFICIÊNCIA MORTAL do artilheiro
      - Mostrar como o time EXPLODIU em produtividade
      - Revelar o MOMENTO MÁGICO que mudou tudo
      - Comparar com LENDAS e momentos HISTÓRICOS
      
      3. SUBSTITUIÇÃO:
      - Avaliar se foi uma DECISÃO GENIAL ou DESASTROSA
      - Mostrar os números que JUSTIFICAM ou CONDENAM a troca
      - Revelar se o jogador foi HERÓI ou DECEPÇÃO
      - Projetar o IMPACTO DRAMÁTICO no resultado
      
      4. ESTATÍSTICAS GERAIS:
      - Transformar números em NARRATIVAS ÉPICAS
      - Mostrar DOMÍNIO ABSOLUTO ou RESISTÊNCIA HEROICA
      - Revelar VIRADAS ESPETACULARES nos números
      - Comparar performances LENDÁRIAS ou VEXATÓRIAS
      
      EXEMPLOS DO QUE QUEREMOS (VERSÃO EMOCIONAL):
      
      ❌ "Martinez Quarta foi expulso aos 65 minutos"
      ✅ "Martinez Quarta DESTRUIU as chances do River! O zagueiro cometeu 0,43 faltas/minuto (4 faltas em 65min), sendo 28% mais violento que a média. Sua expulsão DEVASTOU a defesa: eficiência caiu de 2,1 para 1,7 desarmes/10min, abrindo o caminho para o gol FATAL 6 minutos depois!"
      
      ❌ "Esposito marcou aos 71 minutos"  
      ✅ "Esposito mostrou FRIEZA DE CRAQUE! Converteu aos 71:15 sua ÚNICA chance no alvo (100% de eficiência letal), enquanto a Inter DESPERDIÇAVA com apenas 16,7% de conversão. O gol CERTEIRO veio 6:15 após a expulsão, quando a Inter EXPLODIU de 0,18 para 0,31 chutes/minuto, MASSACRANDO o River!"
      
      EXEMPLO DE GOL PERDIDO (COMO DEVERIA SER):
      Se data-timeline tem: "90:00 score_change Inter take a comfortable 2-0 lead thanks to Alessandro Bastoni"
      ✅ "Alessandro Bastoni FECHOU O CAIXÃO aos 90 minutos! O zagueiro marcou o segundo gol da Inter (2-0), SELANDO a vitória nos acréscimos. Bastoni mostrou FRIEZA TOTAL ao converter quando o River já estava com 10 homens, aproveitando a vantagem numérica para dar o golpe de MISERICÓRDIA. A Inter DOMINOU estatisticamente: 58% de posse vs 42% do River na reta final!"
      
      ❌ "Inter tem 52% de posse aos 72 minutos"
      ✅ "A Inter DOMINOU após a vantagem numérica! A posse DISPAROU de 50% para 58% em apenas 7 minutos (crescimento AVASSALADOR de 16%). O time EXPLODIU ofensivamente: de 0,17 para 0,29 chutes/minuto, enquanto o River DESABOU para míseros 0,08 chutes/minuto (queda HUMILHANTE de 53%)!"
      
      ANÁLISE ESPECIALIZADA DE SUBSTITUIÇÕES (VERSÃO EMOCIONAL):
      Quando um jogador for substituído, detalhar com PAIXÃO:
      
      ESTATÍSTICAS INDIVIDUAIS DO JOGADOR:
      - Tempo em campo: mostrar se foi GUERREIRO incansável ou FRACASSOU rapidamente
      - Performance ofensiva: revelar se foi ARTILHEIRO IMPLACÁVEL ou DESPERDIÇADOR
      - Performance defensiva: mostrar se foi MURALHA ou PENEIRA
      - Performance técnica: revelar MAESTRIA ou AMADORISMO nos passes
      - Disciplina: expor se foi CAVALHEIRO ou BRIGÃO
      - Eficiência temporal: mostrar INTENSIDADE ou PREGUIÇA
      
      ANÁLISE COMPARATIVA E AVALIAÇÃO EMOCIONAL:
      - Comparar com LENDAS da posição ou FRACASSOS históricos
      - Mostrar se DOMINOU ou foi DOMINADO pelos adversários
      - Revelar se foi DECISIVO ou INVISÍVEL nos momentos cruciais
      - Avaliar se SALVOU ou CONDENOU o time
      - Nota de 0 a 10 que faz o torcedor VIBRAR ou se REVOLTAR
      
      EXEMPLOS DE ANÁLISE DE SUBSTITUIÇÃO EMOCIONAL:
      - "Gabriel Barbosa DECEPCIONOU a Nação Rubro-Negra! Saiu aos 72:15 após 72 minutos de APATIA total. O camisa 9 finalizou apenas 4 vezes (0,055/min), ficou 31% ABAIXO da média dos atacantes (0,08 chutes/min). Com 50% de precisão e 78% de passes certos, mostrou números MEDIANOS para quem deveria ser o PROTAGONISTA. Nota 6,5 pela PERFORMANCE FRUSTRANTE!"
      
      - "João Gomes foi o SENHOR DO MEIO-CAMPO! Substituído aos 65:30 após 65 minutos de DOMÍNIO ABSOLUTO. O volante COMANDOU com 89% de passes certos (42/47), fez 6 desarmes CIRÚRGICOS (0,092/min) e cometeu apenas 1 falta. SUPEROU em 23% a média dos meio-campistas, sendo o MAESTRO da partida. Nota 8,2 pela EXIBIÇÃO SOBERANA!"
      
      - "Raphael Veiga SUMIU quando mais precisava! Saiu aos 58:12 após 58 minutos de INVISIBILIDADE total. O meia teve apenas 67% de passes certos (24/36), NÃO finalizou NENHUMA vez e perdeu 3 dribles. Ficou 45% ABAIXO da média de criação (0,07 vs 0,12 chances/min), sendo um FANTASMA ofensivo. Nota 4,8 pela ATUAÇÃO VERGONHOSA!"
      
      CRITÉRIOS PARA NOTAS EMOCIONAIS (0-10):
      - 9-10: LENDA! Performance de GÊNIO, muito acima de qualquer mortal
      - 7-8: CRAQUE! Atuação BRILHANTE, acima da média com momentos MÁGICOS
      - 5-6: NORMAL. Performance MEDIANA, fez o básico sem BRILHAR
      - 3-4: DECEPÇÃO! Atuação ABAIXO do esperado, com falhas EVIDENTES
      - 0-2: DESASTRE! Performance VEXATÓRIA, muito abaixo do aceitável
      
      ⚠️ ALERTA CRÍTICO - NÃO PERDER EVENTOS NOVOS:
      
      ANTES de criar qualquer snippet sobre estatísticas gerais, disciplina, ou posse de bola:
      1. VERIFICAR se há GOLS novos no data-timeline
      2. VERIFICAR se há CARTÕES VERMELHOS novos
      3. VERIFICAR se há SUBSTITUIÇÕES importantes
      
      SE HOUVER EVENTOS NOVOS NÃO COBERTOS:
      - Criar snippets APENAS sobre esses eventos
      - NÃO criar snippets genéricos
      - FOCAR no que é NOVIDADE
      
      EXEMPLO DO QUE NÃO FAZER:
      ❌ Criar snippet sobre "disciplina geral" quando há gol novo não coberto
      ❌ Analisar posse de bola quando há expulsão nova
      ❌ Falar de estatísticas antigas quando há substituição recente
      
      REGRAS CRÍTICAS PARA CONTEÚDO - PROIBIÇÕES ABSOLUTAS:
      - NÃO gerar, assumir, presumir ou criar qualquer informação não explicitamente presente nos documentos
      - NÃO fazer interpretações sobre a natureza dos lances (violentos, limpos, intensos, etc.) a menos que explicitamente descrito nos dados
      - NÃO presumir ausência de eventos (ex: 'sem lances violentos', 'sem confusões', 'jogo limpo') - apenas reportar o que está documentado
      - NÃO adicionar contexto emocional ou interpretativo não presente nos dados originais
      - NÃO fazer conclusões sobre o comportamento dos jogadores além do que está explicitamente relatado
      - LIMITAR-SE ESTRITAMENTE aos fatos documentados nos dados fornecidos
      
      SEMPRE INCLUIR COM EMOÇÃO:
      - Números específicos que fazem o torcedor VIBRAR
      - Comparações que mostram SUPERIORIDADE ou FRACASSO
      - Taxas por minuto que revelam INTENSIDADE ou PREGUIÇA
      - Correlações que contam HISTÓRIAS ÉPICAS
      - Eficiências que provam CLASSE ou expõem AMADORISMO
    schema:
      title: "AnaliseEventoAoVivo"
      description: "Extrair trechos específicos dos eventos ao vivo fornecidos em português brasileiro - NENHUM CONTEÚDO GERADO PERMITIDO"
      type: "object"
      required:
        - snippets
        - no_news
      properties:
        no_news:
          type: "boolean"
          description: "Definir como true se não houver eventos novos ou diferentes em relação às últimas 3 mensagens geradas. Se todos os eventos já foram reportados nas mensagens anteriores, marcar como true para evitar repetição."
        snippets:
          type: "array"
          description: "Trechos exatos dos eventos ao vivo fornecidos que contêm informações específicas sobre a partida em andamento - devem ser citações diretas ou paráfrases apenas do material fonte. APENAS incluir eventos novos não mencionados nas últimas 3 mensagens."
          minItems: 0
          maxItems: 10
          items:
            type: "object"
            required:
              - title
              - content
              - subject
              - momento
              - periodo
            properties:
              content:
                type: "string"
                description: |
                  Análise estatística EMOCIONANTE de EXATAMENTE 3 frases em português brasileiro. OBRIGATÓRIO incluir:
                  - Números específicos que fazem o torcedor VIBRAR (taxas por minuto, percentuais IMPRESSIONANTES)
                  - Comparações estatísticas que mostram DOMÍNIO ou FRACASSO
                  - Correlações entre eventos que contam HISTÓRIAS ÉPICAS
                  - Variações percentuais que revelam VIRADAS DRAMÁTICAS
                  TOM EMOCIONAL: usar palavras que fazem o torcedor se EMOCIONAR - EXPLODIR, DOMINAR, MASSACRAR, BRILHAR, DECEPCIONAR, DESTRUIR.
              title:
                type: "string"
                description: "Criar um título descritivo em português brasileiro baseado APENAS nos eventos reais e NOVOS encontrados nos documentos. Usar informações específicas dos lances, jogadores envolvidos e momentos da partida mencionados no material fonte que não foram cobertos nas últimas 3 mensagens. Exemplo: 'Gol de João Silva abre o placar para o Flamengo'"
              subject:
                type: "string"
                description: "Identificar o evento específico, jogador envolvido ou momento da partida em português brasileiro, baseado APENAS no que está realmente mencionado nos documentos fornecidos e que representa uma novidade em relação às mensagens anteriores. SEMPRE incluir os nomes dos times do confronto no subject. Usar descrições exatas dos eventos como aparecem no texto fonte. Exemplo: 'Flamengo x Vasco - Gol de João Silva' ou 'Palmeiras x Corinthians - Cartão amarelo para Carlos Santos'"
              momento:
                type: "string"
                description: |
                  Momento específico da partida em que o evento ocorreu, baseado no momento mencionado no documento.
                  SEMPRE reportar no formato MM:SS (minutos:segundos).
                  Exemplos: "74:26" para um evento aos 74 minutos e 26 segundos, "05:00" para 5 minutos exatos.
                  Se for pré jogo responder "00:00"
                  Se for pós jogo responder "90:00"
                  NUNCA usar apenas minutos (ex: "74") - sempre incluir os segundos.
              periodo:
                type: "string"
                description: |
                  Código da fase da partida em que o evento ocorreu, baseado no momento específico mencionado no documento:
                  PRE_JOGO: Eventos antes do início da partida (aquecimento, hinos, escalações)
                  PRIMEIRO_TEMPO: Eventos durante os primeiros 45 minutos + acréscimos
                  INTERVALO: Eventos durante o intervalo entre os tempos
                  SEGUNDO_TEMPO: Eventos durante os segundos 45 minutos + acréscimos
                  AGUARDANDO_PRORROGACAO: Período de espera antes da prorrogação
                  PRIMEIRO_TEMPO_PRORROGACAO: Eventos durante o primeiro tempo da prorrogação
                  INTERVALO_PRORROGACAO: Intervalo entre os tempos da prorrogação
                  SEGUNDO_TEMPO_PRORROGACAO: Eventos durante o segundo tempo da prorrogação
                  AGUARDANDO_PENALIDADES: Período de espera antes dos pênaltis
                  PENALIDADES: Eventos durante a disputa de pênaltis
                  FIM_DE_JOGO: Momento final da partida
                  POS_JOGO_AO_VIVO: Eventos imediatamente após o fim da partida
                  POS_JOGO: Eventos pós-partida (entrevistas, análises)
                enum:
                  - PRE_JOGO
                  - PRIMEIRO_TEMPO
                  - INTERVALO
                  - SEGUNDO_TEMPO
                  - AGUARDANDO_PRORROGACAO
                  - PRIMEIRO_TEMPO_PRORROGACAO
                  - INTERVALO_PRORROGACAO
                  - SEGUNDO_TEMPO_PRORROGACAO
                  - AGUARDANDO_PENALIDADES
                  - PENALIDADES
                  - FIM_DE_JOGO
                  - POS_JOGO_AO_VIVO
                  - POS_JOGO
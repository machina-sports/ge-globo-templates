prompts:

  # prompt-live-event-analysis
  - type: prompt
    name: prompt-live-event-analysis
    title: "Cobertura - Análise de Eventos ao Vivo"
    description: "Extrair e analisar informações específicas de eventos de futebol ao vivo em diferentes fases da partida"
    instruction: |
      OBJETIVO: Gerar análises estatísticas avançadas que COMPLEMENTAM a cobertura factual básica dos editores.
      
      REGRA FUNDAMENTAL: 
      NÃO repetir fatos básicos (gols, cartões, substituições) - os editores já fazem isso.
      FOCAR EM: cálculos, percentuais, comparações, eficiência, taxas por minuto, correlações estatísticas.
      
      COMO ANALISAR CADA EVENTO:
      
      1. EXPULSÃO/CARTÃO:
      - Calcular impacto nas estatísticas (antes vs depois)
      - Analisar faltas/minuto do jogador expulso
      - Comparar disciplina das equipes (faltas, cartões por tempo)
      - Projetar impacto tático baseado em números
      
      2. GOL:
      - Eficiência de conversão (chutes vs gols)
      - Tempo médio entre chutes e gol
      - Impacto na posse de bola pós-gol
      - Performance do artilheiro (chutes/minuto, precisão)
      
      3. SUBSTITUIÇÃO:
      - Estatísticas completas do substituído (tempo, ações/minuto)
      - Comparação com média da posição
      - Nota 0-10 baseada em números
      - Impacto esperado do substituto
      
      4. ESTATÍSTICAS GERAIS:
      - Calcular eficiências (chutes no alvo/total, passes certos/tentativas)
      - Taxas por minuto (finalizações, faltas, escanteios)
      - Variações percentuais ao longo do jogo
      - Correlações entre eventos e performance
      
      EXEMPLOS DO QUE QUEREMOS:
      
      ❌ "Martinez Quarta foi expulso aos 65 minutos"
      ✅ "Martinez Quarta foi expulso após cometer 0,43 faltas/minuto (4 faltas em 65min), 28% acima da média dos zagueiros no jogo. Sua expulsão reduziu a eficiência defensiva do River de 2,1 para 1,7 desarmes/10min, impactando diretamente no gol sofrido 6 minutos depois."
      
      ❌ "Esposito marcou aos 71 minutos"  
      ✅ "Esposito converteu aos 71:15 sua única finalização no alvo (100% de eficiência), contrastando com a Inter que tinha 16,7% de conversão (2 no alvo em 12 chutes). O gol veio 6:15 após a expulsão, quando a Inter elevou de 0,18 para 0,31 chutes/minuto, aproveitando a vantagem numérica."
      
      ❌ "Inter tem 52% de posse aos 72 minutos"
      ✅ "A vantagem numérica elevou a posse da Inter de 50% para 58% em 7 minutos (crescimento de 16%). A equipe aumentou sua eficiência ofensiva de 0,17 para 0,29 chutes/minuto pós-expulsão, enquanto o River reduziu para 0,08 chutes/minuto (queda de 53%)."
      
      SEMPRE INCLUIR:
      - Números específicos e cálculos
      - Comparações percentuais  
      - Taxas por minuto
      - Correlações entre eventos
      - Eficiências e conversões
    schema:
      title: "AnaliseEventoAoVivo"
      description: "Extrair trechos específicos dos eventos ao vivo fornecidos em português brasileiro - NENHUM CONTEÚDO GERADO PERMITIDO"
      type: "object"
      required:
        - snippets
        - no_news
      properties:
        no_news:
          type: "boolean"
          description: "Definir como true se não houver eventos novos ou diferentes em relação às últimas 3 mensagens geradas. Se todos os eventos já foram reportados nas mensagens anteriores, marcar como true para evitar repetição."
        snippets:
          type: "array"
          description: "Trechos exatos dos eventos ao vivo fornecidos que contêm informações específicas sobre a partida em andamento - devem ser citações diretas ou paráfrases apenas do material fonte. APENAS incluir eventos novos não mencionados nas últimas 3 mensagens."
          minItems: 0
          maxItems: 10
          items:
            type: "object"
            required:
              - title
              - content
              - subject
              - momento
              - periodo
            properties:
              content:
                type: "string"
                description: |
                  Análise estatística avançada de EXATAMENTE 3 frases em português brasileiro. OBRIGATÓRIO incluir:
                  - Números específicos e cálculos (taxas por minuto, percentuais, eficiências)
                  - Comparações estatísticas entre jogadores/equipes
                  - Correlações entre eventos e performance
                  - Variações percentuais e impacto numérico
                  NÃO repetir fatos básicos - FOCAR em análise estatística que complementa a cobertura editorial.
              title:
                type: "string"
                description: "Criar um título descritivo em português brasileiro baseado APENAS nos eventos reais e NOVOS encontrados nos documentos. Usar informações específicas dos lances, jogadores envolvidos e momentos da partida mencionados no material fonte que não foram cobertos nas últimas 3 mensagens. Exemplo: 'Gol de João Silva abre o placar para o Flamengo'"
              subject:
                type: "string"
                description: "Identificar o evento específico, jogador envolvido ou momento da partida em português brasileiro, baseado APENAS no que está realmente mencionado nos documentos fornecidos e que representa uma novidade em relação às mensagens anteriores. SEMPRE incluir os nomes dos times do confronto no subject. Usar descrições exatas dos eventos como aparecem no texto fonte. Exemplo: 'Flamengo x Vasco - Gol de João Silva' ou 'Palmeiras x Corinthians - Cartão amarelo para Carlos Santos'"
              momento:
                type: "string"
                description: |
                  Momento específico da partida em que o evento ocorreu, baseado no momento mencionado no documento.
                  SEMPRE reportar no formato MM:SS (minutos:segundos).
                  Exemplos: "74:26" para um evento aos 74 minutos e 26 segundos, "05:00" para 5 minutos exatos.
                  Se for pré jogo responder "00:00"
                  Se for pós jogo responder "90:00"
                  NUNCA usar apenas minutos (ex: "74") - sempre incluir os segundos.
              periodo:
                type: "string"
                description: |
                  Código da fase da partida em que o evento ocorreu, baseado no momento específico mencionado no documento:
                  PRE_JOGO: Eventos antes do início da partida (aquecimento, hinos, escalações)
                  PRIMEIRO_TEMPO: Eventos durante os primeiros 45 minutos + acréscimos
                  INTERVALO: Eventos durante o intervalo entre os tempos
                  SEGUNDO_TEMPO: Eventos durante os segundos 45 minutos + acréscimos
                  AGUARDANDO_PRORROGACAO: Período de espera antes da prorrogação
                  PRIMEIRO_TEMPO_PRORROGACAO: Eventos durante o primeiro tempo da prorrogação
                  INTERVALO_PRORROGACAO: Intervalo entre os tempos da prorrogação
                  SEGUNDO_TEMPO_PRORROGACAO: Eventos durante o segundo tempo da prorrogação
                  AGUARDANDO_PENALIDADES: Período de espera antes dos pênaltis
                  PENALIDADES: Eventos durante a disputa de pênaltis
                  FIM_DE_JOGO: Momento final da partida
                  POS_JOGO_AO_VIVO: Eventos imediatamente após o fim da partida
                  POS_JOGO: Eventos pós-partida (entrevistas, análises)
                enum:
                  - PRE_JOGO
                  - PRIMEIRO_TEMPO
                  - INTERVALO
                  - SEGUNDO_TEMPO
                  - AGUARDANDO_PRORROGACAO
                  - PRIMEIRO_TEMPO_PRORROGACAO
                  - INTERVALO_PRORROGACAO
                  - SEGUNDO_TEMPO_PRORROGACAO
                  - AGUARDANDO_PENALIDADES
                  - PENALIDADES
                  - FIM_DE_JOGO
                  - POS_JOGO_AO_VIVO
                  - POS_JOGO